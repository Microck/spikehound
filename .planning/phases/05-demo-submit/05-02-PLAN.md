---
phase: 05-demo-submit
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - README.md
  - docs/architecture.mmd
  - docs/render_architecture.sh
  - docs/architecture.png
autonomous: true

must_haves:
  truths:
    - "README explains setup and how to trigger a demo investigation"
    - "Architecture diagram shows all 6 agents and data flows"
  artifacts:
    - path: "README.md"
      provides: "Hackathon submission documentation"
    - path: "docs/architecture.png"
      provides: "Diagram image for judges"
  key_links:
    - from: "docs/architecture.mmd"
      to: "docs/architecture.png"
      via: "render script"
      pattern: "mermaid"
---

<objective>
Create submission-ready documentation: README and architecture diagram.

Purpose: Make the project understandable to judges in under 60 seconds.
Output: README + Mermaid diagram + rendered PNG.
</objective>

<execution_context>
@/home/ubuntu/.config/opencode/get-shit-done/workflows/execute-plan.md
@/home/ubuntu/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Write README with setup, usage, and limitations</name>
  <files>README.md</files>
  <action>
Create `README.md` including:
- What it is (Azure cost anomaly war room)
- Architecture overview and the 6 agents
- Setup: Python deps, required env vars, how to run server
- How to trigger: `curl` example to `/webhooks/alert`
- Demo: link to `demo/scenario.md`
- Safety: human approval required
- Out of scope disclaimers (no production deployment)
Keep it concise and skimmable.
  </action>
  <verify>python3 -c "import pathlib; p=pathlib.Path('README.md'); assert p.exists() and p.stat().st_size>800"</verify>
  <done>README exists and contains setup + trigger instructions.</done>
</task>

<task type="auto">
  <name>Task 2: Create Mermaid architecture diagram and render script</name>
  <files>docs/architecture.mmd, docs/render_architecture.sh</files>
  <action>
Create `docs/architecture.mmd` (Mermaid) showing:
- Azure Monitor alert -> Coordinator -> (Cost/Resource/History) -> Diagnosis -> Remediation -> Human (Slack)
- Cosmos DB + AI Search connected to History

Create `docs/render_architecture.sh` that renders to `docs/architecture.png` using:
- `npx -y @mermaid-js/mermaid-cli -i docs/architecture.mmd -o docs/architecture.png`
Script prerequisites (make explicit in the script output):
- Node.js + npm available on PATH (recommend Node 18+)

Fallback for environments without Node/npm:
- If `docker` exists, document (and optionally implement) a docker-based render path (e.g., `minlag/mermaid-cli`) that produces the same `docs/architecture.png`.
- If neither Node/npm nor docker are available, fail with a clear message instructing the user to provide a pre-rendered `docs/architecture.png`.
  </action>
  <verify>bash -n docs/render_architecture.sh</verify>
  <done>Diagram source exists and a render script is present.</done>
</task>

<task type="auto">
  <name>Task 3: Render architecture PNG</name>
  <files>docs/architecture.png</files>
  <action>
Render `docs/architecture.png`.

Preferred path:
- Run `bash docs/render_architecture.sh` (uses `npx @mermaid-js/mermaid-cli`).

Fallback path if Node/npm is missing but docker is present:
- Render with docker (example):
  - `docker run --rm -u "$(id -u):$(id -g)" -v "$PWD":/data minlag/mermaid-cli -i /data/docs/architecture.mmd -o /data/docs/architecture.png`

If neither Node/npm nor docker are available, stop with a clear error message and do not silently generate a placeholder image.
  </action>
  <verify>(command -v node >/dev/null && command -v npm >/dev/null && bash docs/render_architecture.sh && test -s docs/architecture.png) || (command -v docker >/dev/null && docker run --rm -u "$(id -u):$(id -g)" -v "$PWD":/data minlag/mermaid-cli -i /data/docs/architecture.mmd -o /data/docs/architecture.png && test -s docs/architecture.png)</verify>
  <done>Architecture PNG exists at `docs/architecture.png` and is renderable via `docs/render_architecture.sh`.</done>
</task>

</tasks>

<verification>
- README is readable and includes a quickstart
- `docs/architecture.png` exists and clearly shows agent flow
</verification>

<success_criteria>
- DEMO-03/DEMO-04 met: README + diagram exist and are polished
</success_criteria>

<output>
After completion, create `.planning/phases/05-demo-submit/05-02-SUMMARY.md`
</output>
